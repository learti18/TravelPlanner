import{j as n,Q as U,S as _,U as Y,V as E}from"./ui-CiCueMuk.js";import{a as D,l as $,u as z}from"./vendor-Bi9KE6av.js";import{s as b,j as k,M as F,d as V,t as H,U as R}from"./icons-ogfa59Qi.js";import{u as Z}from"./useActivities-CkXarOVE.js";import{B as O}from"./button-Djj-QIRr.js";import{u as W}from"./useDestinations-DSFJXpoB.js";import{t as I,d as X,a as w,b as C}from"./differenceInCalendarDays-BV5Kr9EH.js";import"./index-C1Txk7kS.js";function B(t,e){const s=I(t),r=I(e),i=v(s,r),a=Math.abs(X(s,r));s.setDate(s.getDate()-i*a);const o=+(v(s,r)===-i),d=i*(a-o);return d===0?0:d}function v(t,e){const s=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return s<0?-1:s>0?1:s}function T(t,e){const r=q(t);let i;if(r.date){const l=G(r.date,2);i=K(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const a=i.getTime();let o=0,d;if(r.time&&(o=L(r.time),isNaN(o)))return new Date(NaN);if(r.timezone){if(d=ee(r.timezone),isNaN(d))return new Date(NaN)}else{const l=new Date(a+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(a+o+d)}const j={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},J=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,P=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Q=/^([+-])(\d{2})(?::?(\d{2}))?$/;function q(t){const e={},s=t.split(j.dateTimeDelimiter);let r;if(s.length>2)return e;if(/:/.test(s[0])?r=s[0]:(e.date=s[0],r=s[1],j.timeZoneDelimiter.test(e.date)&&(e.date=t.split(j.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=j.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function G(t,e){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(s);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?i:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function K(t,e){if(e===null)return new Date(NaN);const s=t.match(J);if(!s)return new Date(NaN);const r=!!s[4],i=p(s[1]),a=p(s[2])-1,o=p(s[3]),d=p(s[4]),l=p(s[5])-1;if(r)return ae(e,d,l)?te(e,d,l):new Date(NaN);{const c=new Date(0);return!ne(e,a,o)||!re(e,i)?new Date(NaN):(c.setUTCFullYear(e,a,Math.max(i,o)),c)}}function p(t){return t?parseInt(t):1}function L(t){const e=t.match(P);if(!e)return NaN;const s=y(e[1]),r=y(e[2]),i=y(e[3]);return ie(s,r,i)?s*w+r*C+i*1e3:NaN}function y(t){return t&&parseFloat(t.replace(",","."))||0}function ee(t){if(t==="Z")return 0;const e=t.match(Q);if(!e)return 0;const s=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return le(r,i)?s*(r*w+i*C):NaN}function te(t,e,s){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,a=(e-1)*7+s+1-i;return r.setUTCDate(r.getUTCDate()+a),r}const se=[31,null,31,30,31,30,31,31,30,31,30,31];function S(t){return t%400===0||t%4===0&&t%100!==0}function ne(t,e,s){return e>=0&&e<=11&&s>=1&&s<=(se[e]||(S(t)?29:28))}function re(t,e){return e>=1&&e<=(S(t)?366:365)}function ae(t,e,s){return e>=1&&e<=53&&s>=0&&s<=6}function ie(t,e,s){return t===24?e===0&&s===0:s>=0&&s<60&&e>=0&&e<60&&t>=0&&t<25}function le(t,e){return e>=0&&e<=59}function oe({activity:t,isSelected:e,isDisabled:s}){return n.jsxs("div",{className:`border rounded-xl p-3 mt-2 flex gap-5 transition-all relative
        ${s?"opacity-50 cursor-not-allowed":"hover:scale-105 cursor-pointer hover:shadow-md"}
        ${e?"bg-green-50 ":"border-gray-300"}`,children:[n.jsx("img",{src:`http://localhost:5120${t.imageUrl}`,className:"w-[130px] h-[130px] rounded-xl",alt:t.place}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-bold text-lg",children:t.name}),n.jsx("p",{className:"text-sm text-gray-400",children:t.description})]}),e&&n.jsx(b,{size:24,className:"text-green-500 self-start mt-2 absolute bottom-3 right-3"})]})}function ce(t,e){const[s,r]=D.useState([]);return D.useEffect(()=>{t&&t.length>0&&r((()=>{let a=[];for(let o=1;o<=e;o++){let d=[...t],l=[];for(let c=0;c<5&&d.length>0;c++){const m=Math.floor(Math.random()*d.length),x=d.splice(m,1)[0];x&&l.push(x)}a.push({day:o,activities:l})}return a})())},[t,e]),{itineraries:s}}function de({destination:t,noOfDays:e,selectedActivities:s,onActivitySelect:r}){const{activities:a}=Z(t.id),{itineraries:o}=ce(a,e),d=(l,c)=>{const m=s[l]||[],x=m.some(f=>f.name===c.name);let u;if(x)u=m.filter(f=>f.name!==c.name);else if(m.length<3)u=[...m,c];else return;r(l,u)};return n.jsxs("div",{className:"mt-5",children:[n.jsx("h2",{className:"font-bold text-lg",children:"Choose up to 3 activities per day for each day of your trip!"}),n.jsx("div",{children:o.map(l=>{var c;return n.jsx("div",{children:n.jsx(U,{type:"single",collapsible:!0,children:n.jsxs(_,{value:`day-${l.day}`,children:[n.jsxs(Y,{className:"flex flex-row justify-between w-full shadow-md p-2 px-5 rounded-lg",children:[n.jsxs("h2",{className:"font-bold text-lg",children:["Day ",l.day]}),((c=s[l.day])==null?void 0:c.length)===3&&n.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["You have selected the maximum of ",3," activities for this day."]}),n.jsx(k,{})]}),n.jsx(E,{children:n.jsx("div",{className:"grid md:grid-cols-2 gap-5 my-4",children:l.activities.map((m,x)=>{var h,N;const u=(h=s[l.day])==null?void 0:h.some(g=>g.name===m.name),f=!u&&((N=s[l.day])==null?void 0:N.length)===3;return n.jsxs("div",{onClick:()=>{f||d(l.day,m)},children:[n.jsx("p",{className:"text-orange-400 font-semibold",children:m.time}),n.jsx(oe,{activity:m,isSelected:u,isDisabled:f})]},x)})})})]})})},l.day)})})]})}function me({destination:t,selectedHotel:e,onHotelSelect:s}){var i;const r=a=>{s(o=>o===a?null:a)};return n.jsxs("div",{children:[n.jsx("h2",{className:"font-bold text-xl mt-5",children:"Select the hotel you will be staying at"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-5 mt-3 relative",children:(i=t==null?void 0:t.hotels)==null?void 0:i.map((a,o)=>n.jsxs("div",{className:`hover:scale-105 transition-all cursor-pointer p-2 rounded-lg relative ${e&&e!==a.id?"opacity-50 cursor-not-allowed":"opacity-100 cursor-pointer "}`,onClick:()=>r(a.id),style:{pointerEvents:e&&e!==a.id?"none":"auto"},children:[n.jsx("img",{src:`http://localhost:5120${a.imageUrl}`,className:"rounded-xl",alt:a.name}),n.jsxs("div",{className:"my-2 flex flex-col gap-2",children:[n.jsxs("h2",{className:"font-medium flex items-center justify-between",children:[a.name,e===a.id&&n.jsx(b,{size:26,className:"text-green-500 absolute bottom-21 right-3"})]}),n.jsxs("h2",{className:"text-xs text-gray-500 flex items-center gap-1",children:[n.jsx(F,{size:16}),a.address]}),n.jsxs("div",{className:"flex flex-row items-center justify-between",children:[n.jsxs("h2",{className:"text-md font-semibold",children:[a.price,"$",n.jsx("span",{className:"text-gray-400",children:"/Night"})]}),n.jsxs("h2",{className:"text-sm flex items-center gap-1",children:[a.rating,n.jsx(V,{size:16})]})]})]})]},o))})]})}function ue({destination:t,noOfDays:e,travelType:s,submitData:r}){return n.jsxs("div",{children:[n.jsx("img",{src:`http://localhost:5120${t.imageUrl}`,alt:t.name,className:"h-[360px] w-full object-cover rounded-xl"}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"my-5 flex flex-col gap-2",children:[n.jsx("h2",{className:"font-bold text-2xl",children:t.name}),n.jsxs("div",{className:"flex flex-row gap-2",children:[n.jsxs("h2",{className:"flex items-center gap-2 p-1 px-3 bg-gray-200 rounded-full text-gray-500 text-xs md:text-base",children:[n.jsx(H,{size:18}),`${e} Day${e>1?"s":""}`]}),n.jsxs("h2",{className:"flex items-center gap-2 p-1 px-3 bg-gray-200 rounded-full text-gray-500 text-xs md:text-base",children:[n.jsx(R,{size:18}),s]})]})]}),n.jsx(O,{onClick:r,children:"Create Trip"})]})]})}function ye(){const[t,e]=D.useState({}),[s,r]=D.useState(null),{destinationId:i}=$(),a=z(),{destination:o}=W(i),{startDate:d,endDate:l,travelType:c}=a.state,m=T(d),x=T(l),u=B(x,m),f=(g,A)=>{e(M=>({...M,[g]:A}))},h=g=>{r(g)},N=()=>{const g={destination:o.name,activities:t,hotelId:s};console.log("Submitting Data:",g)};return n.jsxs("div",{className:"p-10 md:px-20 lg:px-44 xl:px-56",children:[n.jsx(ue,{destination:o,noOfDays:u,travelType:c,submitData:N}),n.jsx(me,{destination:o,selectedHotel:s,onHotelSelect:h}),n.jsx(de,{destination:o,selectedActivities:t,onActivitySelect:f,noOfDays:u})]})}export{ye as default};
